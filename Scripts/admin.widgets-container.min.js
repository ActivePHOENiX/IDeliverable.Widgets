var WidgetsContainer;!function(t){$(function(){var t=[];$(".add-widget").on("click",function(t){t.preventDefault();var e=$(this).data("host-id"),i=$(this).parents("form:first"),n=$(this).parents("fieldset:first"),a=n.find("input[name='submit.Save']"),d=$(this).attr("href");0===e?i.attr("action",d):(a.val("submit.Save"),$("input[type='hidden'][name='returnUrl']").val(d)),i.submit()}),$("div.widgets").on("click","a.remove-widget",function(i){if(i.preventDefault(),confirm($(this).data("confirm"))){var n=$(this).parents("li:first"),a=n.data("widget-id");n.remove(),t.push(a),$("input[name='removedWidgets']").val(JSON.stringify(t)),e()}});var e=function(){var t=$("input[name='widgetPlacement']"),e={zones:{}};$("div.widgets ul.widgets").each(function(){var t=$(this).data("zone");e.zones[t]={widgets:[]},$(this).find("li").each(function(){var i=$(this).data("widget-id");e.zones[t].widgets.push(i)})});var i=JSON.stringify(e);t.val(i)};$("div.widgets ul.widgets").sortable({connectWith:"div.widgets ul.widgets",dropOnEmpty:!0,placeholder:"sortable-placeholder",receive:function(t,i){e()},update:function(t,i){e()}}),$("#widgetsPlacement legend").expandoControl(function(t){return t.nextAll(".expando")},{collapse:!0,remember:!0})})}(WidgetsContainer||(WidgetsContainer={}));